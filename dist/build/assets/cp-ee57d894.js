var I=Object.defineProperty;var E=(n,e,t)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var v=(n,e,t)=>(E(n,typeof e!="symbol"?e+"":e,t),t),N=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var A=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var F=(n,e,t)=>(N(n,e,"access private method"),t);const SaveButtonOptions_vue_vue_type_style_index_0_lang="";function normalizeComponent(n,e,t,s,r,l,a,o){var c=typeof n=="function"?n.options:n;e&&(c.render=e,c.staticRenderFns=t,c._compiled=!0),s&&(c.functional=!0),l&&(c._scopeId="data-v-"+l);var u;if(a?(u=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),r&&r.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(a)},c._ssrRegister=u):r&&(u=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(c.functional){c._injectStyles=u;var p=c.render;c.render=function(h,m){return u.call(m),p(h,m)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:n,options:c}}const _sfc_main$9={props:{showOptions:{type:Boolean,default:!0},buttonClass:{default:"btn-primary"},preferencesPrefix:{type:String,required:!0}},data(){return{currentOption:null}},computed:{options(){return{options:{listing:__("Go To Listing"),continue_editing:__("Continue Editing"),create_another:__("Create Another")}}},buttonIcon(){switch(!0){case this.currentOption==="listing":return{name:"micro/arrow-go-back",class:"w-3"};case this.currentOption==="continue_editing":return{name:"micro/chevron-down-xs",class:"w-2"};case this.currentOption==="create_another":return{name:"micro/add-circle",class:"w-3"}}},preferencesKey(){return`${this.preferencesPrefix}.after_save`}},mounted(){this.setInitialValue(),this.$watch("currentOption",n=>this.setPreference(n))},methods:{setInitialValue(){this.currentOption=this.$preferences.get(this.preferencesKey)||"listing"},setPreference(n){n!==this.$preferences.get(this.preferencesKey)&&(n==="listing"?this.$preferences.remove(this.preferencesKey):this.$preferences.set(this.preferencesKey,n))}}};var _sfc_render$9=function(){var e=this,t=e._self._c;return t("div",{class:{"btn-group":e.showOptions}},[e._t("default"),e.showOptions?t("dropdown-list",{staticClass:"text-left",scopedSlots:e._u([{key:"trigger",fn:function(){return[t("button",{staticClass:"rounded-l-none",class:e.buttonClass},[e.buttonIcon?t("svg-icon",{class:e.buttonIcon.class,attrs:{name:e.buttonIcon.name}}):e._e()],1)]},proxy:!0}],null,!1,3123076947)},[t("h6",{staticClass:"p-2",domProps:{textContent:e._s(e.__("After Saving"))}}),t("div",{staticClass:"publish-fields px-2"},[t("div",{staticClass:"publish-field save-and-continue-options"},[t("radio-fieldtype",{attrs:{handle:"save_and_continue_options",config:e.options},model:{value:e.currentOption,callback:function(s){e.currentOption=s},expression:"currentOption"}})],1)])]):e._e()],2)},_sfc_staticRenderFns$9=[],__component__$9=normalizeComponent(_sfc_main$9,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,null,null,null);const SaveButtonOptions=__component__$9.exports,HasPreferences$1={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(n){return`${this.preferencesPrefix}.${n}`},getPreference(n){return this.$preferences.get(this.preferencesKey(n))},setPreference(n,e){return this.$preferences.set(this.preferencesKey(n),e)},removePreference(n,e=null){return this.$preferences.remove(this.preferencesKey(n),e)}}},_sfc_main$8={components:{SaveButtonOptions},mixins:[HasPreferences$1],props:{breadcrumbs:Array,initialBlueprint:Object,initialValues:Object,initialMeta:Object,initialTitle:String,action:String,method:String,permalink:String,isCreating:{type:Boolean,default:!1},isInline:{type:Boolean,default:!1},publishContainer:String,readOnly:Boolean,createAnotherUrl:String,listingUrl:String},data(){return{blueprint:this.initialBlueprint,values:this.initialValues,meta:this.initialMeta,title:this.initialTitle,preferencesPrefix:"statamic-events",errors:{},saving:!1,containerWidth:null,saveKeyBinding:null,quickSave:!1}},computed:{enableSidebar(){return this.blueprint.tabs.map(n=>n.handle).includes("sidebar")},shouldShowSidebar(){return this.enableSidebar},afterSaveOption(){return this.getPreference("after_save")}},mounted(){this.saveKeyBinding=this.$keys.bindGlobal(["mod+s","mod+return"],n=>{n.preventDefault(),this.quickSave=!0,this.save()})},methods:{save(){this.saving=!0,this.clearErrors(),this.$axios({method:this.method,url:this.action,data:this.values}).then(n=>{this.saving=!1,this.$refs.container.saved(),this.$emit("saved",n);let e=this.quickSave?"continue_editing":this.afterSaveOption;if(!this.isInline&&e==="create_another"){this.$nextTick(()=>{window.location=this.createAnotherUrl});return}if(!this.isInline&&e===null){this.$nextTick(()=>{window.location=this.listingUrl});return}this.isCreating&&this.publishContainer==="base"?this.$nextTick(()=>{window.location.href=n.data.redirect}):(this.quickSave=!1,this.$toast.success(__("Saved")))}).catch(n=>this.handleAxiosError(n))},clearErrors(){this.error=null,this.errors={}},handleAxiosError(n){if(this.saving=!1,n.response&&n.response.status===422){const{message:e,errors:t}=n.response.data;this.error=e,this.errors=t,this.$toast.error(e)}else n.response?this.$toast.error(n.response.data.message):this.$toast.error(n||"Something went wrong")},setFieldValue(n,e){this.$refs.container.setFieldValue(n,e)},setFieldMeta(n,e){this.$store.dispatch(`publish/${this.publishContainer}/setFieldMeta`,{handle:n,value:e,user:Statamic.user.id})}},watch:{saving(n){this.$progress.loading("statamic-events-publish-form",n)}},destroyed(){this.saveKeyBinding.destroy()}};var _sfc_render$8=function(){var e=this,t=e._self._c;return t("div",[e.breadcrumbs?t("breadcrumb",{attrs:{url:e.breadcrumbs[0].url,title:e.breadcrumbs[0].text}}):e._e(),t("div",{staticClass:"flex items-center mb-3"},[t("h1",{staticClass:"flex-1"},[t("div",{staticClass:"flex items-center"},[t("span",{domProps:{innerHTML:e._s(e.title)}})])]),e.readOnly?e._e():t("div",{staticClass:"hidden md:flex items-center"},[e.readOnly?e._e():t("save-button-options",{attrs:{"preferences-prefix":e.preferencesPrefix}},[t("button",{staticClass:"btn-primary",attrs:{disabled:e.isSaving},on:{click:function(s){return s.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.__("Save"))+" ")])])],1)]),t("publish-container",{ref:"container",attrs:{name:e.publishContainer,blueprint:e.blueprint,values:e.values,meta:e.meta,errors:e.errors},on:{updated:function(s){e.values=s}}},[t("div",[e._l(e.components,function(s){return t(s.name,e._g(e._b({key:s.id,tag:"component",attrs:{container:e.container}},"component",s.props,!1),s.events))}),t("publish-tabs",{attrs:{"read-only":e.readOnly,"enable-sidebar":e.shouldShowSidebar},on:{updated:e.setFieldValue,"meta-updated":e.setFieldMeta,focus:function(s){return e.$refs.container.$emit("focus",s)},blur:function(s){return e.$refs.container.$emit("blur",s)}}})],2)]),t("div",{staticClass:"md:hidden mt-3 flex items-center"},[e.readOnly?e._e():t("button",{staticClass:"btn-lg btn-primary w-full",attrs:{disabled:e.isSaving},on:{click:function(s){return s.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.__("Save"))+" ")])])],1)},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(_sfc_main$8,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,null,null,null);const PublishForm=__component__$8.exports,HasActions={methods:{actionStarted(){this.loading=!0},actionCompleted(n=null,e={}){this.loading=!1,n!==!1&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),e.message!==!1&&this.$toast.success(e.message||__("Action completed")),this.afterActionSuccessfullyCompleted())},afterActionSuccessfullyCompleted(){this.request()}}},HasFilters={data(){return{activeFilterBadges:{},activeFilters:{},activePreset:null,activePresetPayload:{},searchQuery:""}},computed:{activeFilterCount(){let n=Object.keys(this.activeFilters).length;return this.activeFilters.hasOwnProperty("fields")&&(n=n+Object.keys(this.activeFilters.fields).filter(e=>e!="badge").length-1),n},canSave(){return this.isDirty&&this.preferencesPrefix},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},hasActiveFilters(){return this.activeFilterCount>0},searchPlaceholder(){return this.activePreset?__("Searching in: ")+this.activePresetPayload.display:__("Search")}},created(){this.$keys.bind("f",n=>{n.preventDefault(),this.handleShowFilters()})},methods:{searchChanged(n){this.searchQuery=n},hasFields(n){for(const e in n)if(n[e])return!0;return!1},filterChanged({handle:n,values:e},t=!0){e&&this.hasFields(e)?Vue.set(this.activeFilters,n,e):Vue.delete(this.activeFilters,n),t&&this.unselectAllItems()},filtersChanged(n){this.activeFilters={};for(const e in n){const t=n[e];this.filterChanged({handle:e,values:t},!1)}this.unselectAllItems()},filtersReset(){this.activePreset=null,this.activePresetPayload={},this.searchQuery="",this.activeFilters={},this.activeFilterBadges={}},unselectAllItems(){this.$refs.dataList&&this.$refs.dataList.clearSelections()},selectPreset(n,e){this.activePreset=n,this.activePresetPayload=e,this.searchQuery=e.query,this.filtersChanged(e.filters)},autoApplyFilters(n){if(!n)return;let e={};n.filter(t=>!_.isEmpty(t.auto_apply)).forEach(t=>{e[t.handle]=t.auto_apply}),this.activeFilters=e}}},HasPagination={props:{initialPerPage:{type:Number,default(){return Statamic.$config.get("paginationSize")}}},data(){return{perPage:this.initialPerPage,page:1}},mounted(){this.setInitialPerPage()},methods:{setInitialPerPage(){this.hasPreferences&&(this.perPage=this.getPreference("per_page")||this.initialPerPage)},changePerPage(n){n=parseInt(n),(this.hasPreferences?this.setPreference("per_page",n!=this.initialPerPage?n:null):Promise.resolve()).then(t=>{this.perPage=n,this.resetPage()})},selectPage(n){this.page=n,this.$events.$emit("clear-selections")},resetPage(){this.page=1,this.$events.$emit("clear-selections")}}},HasPreferences={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(n){return`${this.preferencesPrefix}.${n}`},getPreference(n){return this.$preferences.get(this.preferencesKey(n))},setPreference(n,e){return this.$preferences.set(this.preferencesKey(n),e)},removePreference(n,e=null){return this.$preferences.remove(this.preferencesKey(n),e)}}},_sfc_main$7={mixins:[HasActions,HasFilters,HasPagination,HasPreferences],props:{initialSortColumn:String,initialSortDirection:String,initialColumns:{type:Array,default:()=>[]},filters:Array,actionUrl:String},data(){return{source:null,initializing:!0,loading:!0,items:[],columns:this.initialColumns,visibleColumns:this.initialColumns.filter(n=>n.visible),sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,meta:null}},computed:{parameters(){return Object.assign({sort:this.sortColumn,order:this.sortDirection,page:this.page,perPage:this.perPage,search:this.searchQuery,filters:this.activeFilterParameters,columns:this.visibleColumns.map(n=>n.field).join(",")},this.additionalParameters)},activeFilterParameters(){return utf8btoa(JSON.stringify(this.activeFilters))},additionalParameters(){return{}},shouldRequestFirstPage(){return this.page>1&&this.items.length===0?(this.page=1,!0):!1}},created(){this.autoApplyFilters(this.filters),this.request()},watch:{parameters:{deep:!0,handler(n,e){e.search===n.search&&JSON.stringify(e)!==JSON.stringify(n)&&this.request()}},loading:{immediate:!0,handler(n){this.$progress.loading(this.listingKey,n)}},searchQuery(n){this.sortColumn=null,this.sortDirection=null,this.resetPage(),this.request()}},methods:{request(){if(!this.requestUrl){this.loading=!1;return}this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:this.parameters,cancelToken:this.source.token}).then(n=>{if(this.columns=n.data.meta.columns,this.activeFilterBadges={...n.data.meta.activeFilterBadges},this.items=Object.values(n.data.data),this.meta=n.data.meta,this.shouldRequestFirstPage)return this.request();this.loading=!1,this.initializing=!1,this.afterRequestCompleted(n)}).catch(n=>{this.$axios.isCancel(n)||(this.loading=!1,this.initializing=!1,!(n.request&&!n.response)&&this.$toast.error(n.response?n.response.data.message:__("Something went wrong"),{duration:null}))})},afterRequestCompleted(n){},sorted(n,e){this.sortColumn=n,this.sortDirection=e},removeRow(n){let e=n.id,t=_.indexOf(this.rows,_.findWhere(this.rows,{id:e}));this.rows.splice(t,1),this.rows.length===0&&location.reload()}}},_sfc_render$7=null,_sfc_staticRenderFns$7=null;var __component__$7=normalizeComponent(_sfc_main$7,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,null,null,null);const Listing=__component__$7.exports;function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults=getDefaults();function changeDefaults(n){defaults=n}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=n=>escapeReplacements[n];function escape(n,e){if(e){if(escapeTest.test(n))return n.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(n))return n.replace(escapeReplaceNoEncode,getEscapeReplacement);return n}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape(n){return n.replace(unescapeTest,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(s,r)=>(r=r.source||r,r=r.replace(caret,"$1"),n=n.replace(s,r),t),getRegex:()=>new RegExp(n,e)};return t}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(n,e,t){if(n){let s;try{s=decodeURIComponent(unescape(t)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}e&&!originIndependentUrl.test(t)&&(t=resolveUrl(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(n,e){baseUrls[" "+n]||(justDomain.test(n)?baseUrls[" "+n]=n+"/":baseUrls[" "+n]=rtrim(n,"/",!0)),n=baseUrls[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(protocol,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(domain,"$1")+e:n+e}const noopTest={exec:function(){}};function splitCells(n,e){const t=n.replace(/\|/g,(l,a,o)=>{let c=!1,u=a;for(;--u>=0&&o[u]==="\\";)c=!c;return c?"|":" |"}),s=t.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function rtrim(n,e,t){const s=n.length;if(s===0)return"";let r=0;for(;r<s;){const l=n.charAt(s-r-1);if(l===e&&!t)r++;else if(l!==e&&t)r++;else break}return n.slice(0,s-r)}function findClosingBracket(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let s=0,r=0;for(;r<t;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])s++;else if(n[r]===e[1]&&(s--,s<0))return r;return-1}function checkDeprecations(n,e){!n||n.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(n.sanitize||n.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(n.highlight||n.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),n.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),n.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),n.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),n.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(n.headerIds||n.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function outputLink(n,e,t,s){const r=e.href,l=e.title?escape(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const o={type:"link",raw:t,href:r,title:l,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,o}return{type:"image",raw:t,href:r,title:l,text:escape(a)}}function indentCodeCompensation(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const s=t[1];return e.split(`
`).map(r=>{const l=r.match(/^\s+/);if(l===null)return r;const[a]=l;return a.length>=s.length?r.slice(s.length):r}).join(`
`)}class Tokenizer{constructor(e){this.options=e||defaults}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:rtrim(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],r=indentCodeCompensation(s,t[3]||"");return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(/#$/.test(s)){const r=rtrim(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const s=t[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const l=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:l,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s,r,l,a,o,c,u,p,f,d,h,m,k=t[1].trim();const $=k.length>1,g={type:"list",raw:"",ordered:$,start:$?+k.slice(0,-1):"",loose:!1,items:[]};k=$?`\\d{1,9}\\${k.slice(-1)}`:`\\${k}`,this.options.pedantic&&(k=$?k:"[*+-]");const b=new RegExp(`^( {0,3}${k})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(t=b.exec(e))||this.rules.block.hr.test(e)));){if(s=t[0],e=e.substring(s.length),p=t[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),f=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=p.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,h=p.slice(a),a+=t[1].length),c=!1,!p&&/^ *$/.test(f)&&(s+=f+`
`,e=e.substring(f.length+1),m=!0),!m){const x=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(d=e.split(`
`,1)[0],f=d,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(w.test(f)||P.test(f)||x.test(f)||y.test(e)));){if(f.search(/[^ ]/)>=a||!f.trim())h+=`
`+f.slice(a);else{if(c||p.search(/[^ ]/)>=4||w.test(p)||P.test(p)||y.test(p))break;h+=`
`+f}!c&&!f.trim()&&(c=!0),s+=d+`
`,e=e.substring(d.length+1),p=f.slice(a)}}g.loose||(u?g.loose=!0:/\n *\n *$/.test(s)&&(u=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(l=r[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:s,task:!!r,checked:l,loose:!1,text:h}),g.raw+=s}g.items[g.items.length-1].raw=s.trimRight(),g.items[g.items.length-1].text=h.trimRight(),g.raw=g.raw.trimRight();const C=g.items.length;for(o=0;o<C;o++)if(this.lexer.state.top=!1,g.items[o].tokens=this.lexer.blockTokens(g.items[o].text,[]),!g.loose){const x=g.items[o].tokens.filter(w=>w.type==="space"),y=x.length>0&&x.some(w=>/\n.*\n/.test(w.raw));g.loose=y}if(g.loose)for(o=0;o<C;o++)g.items[o].loose=!0;return g}}html(e){const t=this.rules.block.html.exec(e);if(t){const s={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]);s.type="paragraph",s.text=r,s.tokens=this.lexer.inline(r)}return s}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",l=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:r,title:l}}}table(e){const t=this.rules.block.table.exec(e);if(t){const s={type:"table",header:splitCells(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=t[0];let r=s.align.length,l,a,o,c;for(l=0;l<r;l++)/^ *-+: *$/.test(s.align[l])?s.align[l]="right":/^ *:-+: *$/.test(s.align[l])?s.align[l]="center":/^ *:-+ *$/.test(s.align[l])?s.align[l]="left":s.align[l]=null;for(r=s.rows.length,l=0;l<r;l++)s.rows[l]=splitCells(s.rows[l],s.header.length).map(u=>({text:u}));for(r=s.header.length,a=0;a<r;a++)s.header[a].tokens=this.lexer.inline(s.header[a].text);for(r=s.rows.length,a=0;a<r;a++)for(c=s.rows[a],o=0;o<c.length;o++)c[o].tokens=this.lexer.inline(c[o].text);return s}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:escape(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const a=rtrim(s.slice(0,-1),"\\");if((s.length-a.length)%2===0)return}else{const a=findClosingBracket(t[2],"()");if(a>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],l="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);a&&(r=a[1],l=a[3])}else l=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),outputLink(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:l&&l.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){let r=(s[2]||s[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const l=s[0].charAt(0);return{type:"text",raw:l,text:l}}return outputLink(s,r,s[0],this.lexer)}}emStrong(e,t,s=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const a=r[0].length-1;let o,c,u=a,p=0;const f=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+a);(r=f.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(c=o.length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&a%3&&!((a+c)%3)){p+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+p);const d=e.slice(0,a+r.index+c+1);if(Math.min(a,c)%2){const m=d.slice(1,-1);return{type:"em",raw:d,text:m,tokens:this.lexer.inlineTokens(m)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(/\n/g," ");const r=/[^ ]/.test(s),l=/^ /.test(s)&&/ $/.test(s);return r&&l&&(s=s.substring(1,s.length-1)),s=escape(s,!0),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const s=this.rules.inline.autolink.exec(e);if(s){let r,l;return s[2]==="@"?(r=escape(this.options.mangle?t(s[1]):s[1]),l="mailto:"+r):(r=escape(s[1]),l=r),{type:"link",raw:s[0],text:r,href:l,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let s;if(s=this.rules.inline.url.exec(e)){let r,l;if(s[2]==="@")r=escape(this.options.mangle?t(s[0]):s[0]),l="mailto:"+r;else{let a;do a=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(a!==s[0]);r=escape(s[0]),s[1]==="www."?l="http://"+s[0]:l=s[0]}return{type:"link",raw:s[0],text:r,href:l,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){const s=this.rules.inline.text.exec(e);if(s){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):escape(s[0]):s[0]:r=escape(this.options.smartypants?t(s[0]):s[0]),{type:"text",raw:s[0],text:r}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.lheading=edit(block.lheading).replace(/bull/g,block.bullet).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal={...block};block.gfm={...block.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic={...block.normal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};inline._punctuation="\\p{P}$+<=>`^|~";inline.punctuation=edit(inline.punctuation,"u").replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;inline.anyPunctuation=/\\[punct]/g;inline._escapes=/\\([punct])/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim,"u").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"gu").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"gu").replace(/punct/g,inline._punctuation).getRegex();inline.anyPunctuation=edit(inline.anyPunctuation,"gu").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=edit(inline._escapes,"gu").replace(/punct/g,inline._punctuation).getRegex();inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal={...inline};inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()};inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function smartypants(n){return n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(n){let e="",t,s;const r=n.length;for(t=0;t<r;t++)s=n.charCodeAt(t),Math.random()>.5&&(s="x"+s.toString(16)),e+="&#"+s+";";return e}class Lexer{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:block.normal,inline:inline.normal};this.options.pedantic?(t.block=block.pedantic,t.inline=inline.pedantic):this.options.gfm&&(t.block=block.gfm,this.options.breaks?t.inline=inline.breaks:t.inline=inline.gfm),this.tokenizer.rules=t}static get rules(){return{block,inline}}static lex(e,t){return new Lexer(t).lex(e)}static lexInline(e,t){return new Lexer(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,c,u)=>c+"    ".repeat(u.length));let s,r,l,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(s=o.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(p){u=p.call({lexer:this},c),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(l=e.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){r=t[t.length-1],a&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s),a=l.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s,r,l,a=e,o,c,u;if(this.tokens.links){const p=Object.keys(this.tokens.links);if(p.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)p.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(s=p.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,a,u)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e,mangle)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e,mangle))){e=e.substring(s.raw.length),t.push(s);continue}if(l=e,this.options.extensions&&this.options.extensions.startInline){let p=1/0;const f=e.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},f),typeof d=="number"&&d>=0&&(p=Math.min(p,d))}),p<1/0&&p>=0&&(l=e.substring(0,p+1))}if(s=this.tokenizer.inlineText(l,smartypants)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),c=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return t}}class Renderer{constructor(e){this.options=e||defaults}code(e,t,s){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const l=this.options.highlight(e,r);l!=null&&l!==e&&(s=!0,e=l)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+escape(r)+'">'+(s?e:escape(e,!0))+`</code></pre>
`:"<pre><code>"+(s?e:escape(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,s,r){if(this.options.headerIds){const l=this.options.headerPrefix+r.slug(s);return`<h${t} id="${l}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,s){const r=t?"ol":"ul",l=t&&s!==1?' start="'+s+'"':"";return"<"+r+l+`>
`+e+"</"+r+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,s){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return s;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+s+"</a>",r}image(e,t,s){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return s;let r=`<img src="${e}" alt="${s}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class TextRenderer{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let s=e,r=0;if(this.seen.hasOwnProperty(s)){r=this.seen[e];do r++,s=e+"-"+r;while(this.seen.hasOwnProperty(s))}return t||(this.seen[e]=r,this.seen[s]=0),s}slug(e,t={}){const s=this.serialize(e);return this.getNextSafeSlug(s,t.dryrun)}}class Parser{constructor(e){this.options=e||defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(e,t){return new Parser(t).parse(e)}static parseInline(e,t){return new Parser(t).parseInline(e)}parse(e,t=!0){let s="",r,l,a,o,c,u,p,f,d,h,m,k,$,g,b,C,x,y,w;const P=e.length;for(r=0;r<P;r++){if(h=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(w=this.options.extensions.renderers[h.type].call({parser:this},h),w!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){s+=w||"";continue}switch(h.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(h.tokens),h.depth,unescape(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(f="",p="",o=h.header.length,l=0;l<o;l++)p+=this.renderer.tablecell(this.parseInline(h.header[l].tokens),{header:!0,align:h.align[l]});for(f+=this.renderer.tablerow(p),d="",o=h.rows.length,l=0;l<o;l++){for(u=h.rows[l],p="",c=u.length,a=0;a<c;a++)p+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:h.align[a]});d+=this.renderer.tablerow(p)}s+=this.renderer.table(f,d);continue}case"blockquote":{d=this.parse(h.tokens),s+=this.renderer.blockquote(d);continue}case"list":{for(m=h.ordered,k=h.start,$=h.loose,o=h.items.length,d="",l=0;l<o;l++)b=h.items[l],C=b.checked,x=b.task,g="",b.task&&(y=this.renderer.checkbox(C),$?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=y+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=y+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:y}):g+=y),g+=this.parse(b.tokens,$),d+=this.renderer.listitem(g,x,C);s+=this.renderer.list(d,m,k);continue}case"html":{s+=this.renderer.html(h.text,h.block);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;r+1<P&&e[r+1].type==="text";)h=e[++r],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);s+=t?this.renderer.paragraph(d):d;continue}default:{const z='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(z);return}else throw new Error(z)}}}return s}parseInline(e,t){t=t||this.renderer;let s="",r,l,a;const o=e.length;for(r=0;r<o;r++){if(l=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]&&(a=this.options.extensions.renderers[l.type].call({parser:this},l),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type))){s+=a||"";continue}switch(l.type){case"escape":{s+=t.text(l.text);break}case"html":{s+=t.html(l.text);break}case"link":{s+=t.link(l.href,l.title,this.parseInline(l.tokens,t));break}case"image":{s+=t.image(l.href,l.title,l.text);break}case"strong":{s+=t.strong(this.parseInline(l.tokens,t));break}case"em":{s+=t.em(this.parseInline(l.tokens,t));break}case"codespan":{s+=t.codespan(l.text);break}case"br":{s+=t.br();break}case"del":{s+=t.del(this.parseInline(l.tokens,t));break}case"text":{s+=t.text(l.text);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return s}}class Hooks{constructor(e){this.options=e||defaults}preprocess(e){return e}postprocess(e){return e}}v(Hooks,"passThroughHooks",new Set(["preprocess","postprocess"]));var S,O,R,T;class Marked{constructor(...e){A(this,S);A(this,R);v(this,"defaults",getDefaults());v(this,"options",this.setOptions);v(this,"parse",F(this,S,O).call(this,Lexer.lex,Parser.parse));v(this,"parseInline",F(this,S,O).call(this,Lexer.lexInline,Parser.parseInline));v(this,"Parser",Parser);v(this,"parser",Parser.parse);v(this,"Renderer",Renderer);v(this,"TextRenderer",TextRenderer);v(this,"Lexer",Lexer);v(this,"lexer",Lexer.lex);v(this,"Tokenizer",Tokenizer);v(this,"Slugger",Slugger);v(this,"Hooks",Hooks);this.use(...e)}walkTokens(e,t){let s=[];for(const r of e)switch(s=s.concat(t.call(this,r)),r.type){case"table":{for(const l of r.header)s=s.concat(this.walkTokens(l.tokens,t));for(const l of r.rows)for(const a of l)s=s.concat(this.walkTokens(a.tokens,t));break}case"list":{s=s.concat(this.walkTokens(r.items,t));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[r.type]?this.defaults.extensions.childTokens[r.type].forEach(l=>{s=s.concat(this.walkTokens(r[l],t))}):r.tokens&&(s=s.concat(this.walkTokens(r.tokens,t)))}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if(l.renderer){const a=t.renderers[l.name];a?t.renderers[l.name]=function(...o){let c=l.renderer.apply(this,o);return c===!1&&(c=a.apply(this,o)),c}:t.renderers[l.name]=l.renderer}if(l.tokenizer){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[l.level]?t[l.level].unshift(l.tokenizer):t[l.level]=[l.tokenizer],l.start&&(l.level==="block"?t.startBlock?t.startBlock.push(l.start):t.startBlock=[l.start]:l.level==="inline"&&(t.startInline?t.startInline.push(l.start):t.startInline=[l.start]))}l.childTokens&&(t.childTokens[l.name]=l.childTokens)}),r.extensions=t),s.renderer){const l=this.defaults.renderer||new Renderer(this.defaults);for(const a in s.renderer){const o=l[a];l[a]=(...c)=>{let u=s.renderer[a].apply(l,c);return u===!1&&(u=o.apply(l,c)),u}}r.renderer=l}if(s.tokenizer){const l=this.defaults.tokenizer||new Tokenizer(this.defaults);for(const a in s.tokenizer){const o=l[a];l[a]=(...c)=>{let u=s.tokenizer[a].apply(l,c);return u===!1&&(u=o.apply(l,c)),u}}r.tokenizer=l}if(s.hooks){const l=this.defaults.hooks||new Hooks;for(const a in s.hooks){const o=l[a];Hooks.passThroughHooks.has(a)?l[a]=c=>{if(this.defaults.async)return Promise.resolve(s.hooks[a].call(l,c)).then(p=>o.call(l,p));const u=s.hooks[a].call(l,c);return o.call(l,u)}:l[a]=(...c)=>{let u=s.hooks[a].apply(l,c);return u===!1&&(u=o.apply(l,c)),u}}r.hooks=l}if(s.walkTokens){const l=this.defaults.walkTokens;r.walkTokens=function(a){let o=[];return o.push(s.walkTokens.call(this,a)),l&&(o=o.concat(l.call(this,a))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}S=new WeakSet,O=function(e,t){return(s,r,l)=>{typeof r=="function"&&(l=r,r=null);const a={...r};r={...this.defaults,...a};const o=F(this,R,T).call(this,r.silent,r.async,l);if(typeof s>"u"||s===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(checkDeprecations(r,l),r.hooks&&(r.hooks.options=r),l){const c=r.highlight;let u;try{r.hooks&&(s=r.hooks.preprocess(s)),u=e(s,r)}catch(d){return o(d)}const p=d=>{let h;if(!d)try{r.walkTokens&&this.walkTokens(u,r.walkTokens),h=t(u,r),r.hooks&&(h=r.hooks.postprocess(h))}catch(m){d=m}return r.highlight=c,d?o(d):l(null,h)};if(!c||c.length<3||(delete r.highlight,!u.length))return p();let f=0;this.walkTokens(u,d=>{d.type==="code"&&(f++,setTimeout(()=>{c(d.text,d.lang,(h,m)=>{if(h)return p(h);m!=null&&m!==d.text&&(d.text=m,d.escaped=!0),f--,f===0&&p()})},0))}),f===0&&p();return}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(s):s).then(c=>e(c,r)).then(c=>r.walkTokens?Promise.all(this.walkTokens(c,r.walkTokens)).then(()=>c):c).then(c=>t(c,r)).then(c=>r.hooks?r.hooks.postprocess(c):c).catch(o);try{r.hooks&&(s=r.hooks.preprocess(s));const c=e(s,r);r.walkTokens&&this.walkTokens(c,r.walkTokens);let u=t(c,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(c){return o(c)}}},R=new WeakSet,T=function(e,t,s){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const l="<p>An error occurred:</p><pre>"+escape(r.message+"",!0)+"</pre>";if(t)return Promise.resolve(l);if(s){s(null,l);return}return l}if(t)return Promise.reject(r);if(s){s(r);return}throw r}};const markedInstance=new Marked(defaults);function marked(n,e,t){return markedInstance.parse(n,e,t)}marked.options=marked.setOptions=function(n){return markedInstance.setOptions(n),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(...n){return markedInstance.use(...n),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.walkTokens=function(n,e){return markedInstance.walkTokens(n,e)};marked.parseInline=markedInstance.parseInline;marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.Hooks=Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;const _sfc_main$6={props:{config:{type:Object,required:!0},value:{required:!0},meta:{},errors:{type:Array},readOnly:Boolean,syncable:Boolean,namePrefix:String,fieldPathPrefix:String},inject:{storeName:{default:null},isInsideConfigFields:{default:!1}},computed:{fieldtypeComponent(){return`${this.config.component||this.config.type}-fieldtype`},fieldtypeComponentExists(){return Vue.options.components[this.fieldtypeComponent]!==void 0},instructions(){return this.config.instructions?this.renderMarkdownAndLinks(__(this.config.instructions)):null},hasError(){return this.errors&&this.errors.length>0},isReadOnly(){return this.storeState.isRoot===!1&&!this.config.localizable?!0:this.isLocked||this.readOnly||this.config.visibility==="read_only"||!1},isLocalizable(){return this.$config.get("sites").length>1&&this.config.localizable},isTab(){return this.config.type==="tab"},isSection(){return this.config.type==="section"},classes(){return["form-group publish-field","publish-field__"+this.config.handle,`${this.config.component||this.config.type}-fieldtype`,,this.isReadOnly?"read-only-field":"",this.isInsideConfigFields?"config-field":`${tailwind_width_class(this.config.width)}`,this.config.classes||"",this.config.full_width_setting?"full-width-setting":"",{"has-error":this.hasError||this.hasNestedError}]},fieldId(){return"field_"+this.config.handle},locks(){return this.storeState.fieldLocks||{}},isLocked(){return Object.keys(this.locks).includes(this.config.handle)},lockingUser(){if(this.isLocked){let n=this.locks[this.config.handle];if(typeof n=="object")return n}},isSynced(){if(this.syncable)return!this.storeState.localizedFields.includes(this.config.handle)},storeState(){return this.$store.state.publish[this.storeName]||{}},hasNestedError(){const n=`${this.fieldPathPrefix||this.config.handle}.`;return Object.keys(this.storeState.errors??[]).some(e=>e.startsWith(n))},labelText(){return this.config.display||Vue.$options.filters.titleize(Vue.$options.filters.deslugify(this.config.handle))},showLabelText(){return!this.config.hide_display},showLabel(){return this.showLabelText||this.isReadOnly||this.config.required||this.isLocked||this.isLocalizable||this.syncable}},methods:{focused(){this.isLocked||this.$emit("focus")},blurred(){this.isLocked||this.$emit("blur")},renderMarkdownAndLinks(n){var e=new marked.Renderer;return e.link=function(t,s,r){var l=marked.Renderer.prototype.link.call(this,t,s,r);return l.replace("<a","<a target='_blank' ")},marked.setOptions({renderer:e}),marked(n)}}};var _sfc_render$6=function(){var e=this,t=e._self._c;return t("publish-field-meta",{attrs:{config:e.config,"initial-value":e.value,"initial-meta":e.meta},scopedSlots:e._u([{key:"default",fn:function({meta:s,value:r,loading:l}){return t("div",{class:e.classes},[t("div",{staticClass:"field-inner"},[e.showLabel?t("label",{staticClass:"publish-field-label",class:{"font-bold":e.config.bold},attrs:{for:e.fieldId}},[e.showLabelText?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.config.handle,delay:500,autoHide:!1},expression:"{content: config.handle, delay: 500, autoHide: false}"}],staticClass:"mr-1",class:{"text-gray-600":e.syncable&&e.isSynced},domProps:{textContent:e._s(e.__(e.labelText))}}):e._e(),e.config.required?t("i",{staticClass:"required mr-1"},[e._v("*")]):e._e(),e.isLocked?t("avatar",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.lockingUser.name,expression:"lockingUser.name"}],staticClass:"w-4 rounded-full -mt-px ml-2 mr-2",attrs:{user:e.lockingUser}}):e._e(),e.isReadOnly&&!e.isTab&&!e.isSection?t("span",{staticClass:"text-gray-500 font-normal text-2xs mr-1"},[e._v(" "+e._s(e.isLocked?e.__("Locked"):e.__("Read Only"))+" ")]):e._e(),e.isLocalizable&&!e.isTab?t("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("Localizable field"),expression:"__('Localizable field')",modifiers:{top:!0}}],staticClass:"h-4 mr-1 w-4 text-gray-600",attrs:{name:"translate"}}):e._e(),!e.isReadOnly&&!e.isTab?t("button",{directives:[{name:"show",rawName:"v-show",value:e.syncable&&e.isSynced,expression:"syncable && isSynced"}],staticClass:"outline-none",class:{flex:e.syncable&&e.isSynced},on:{click:function(a){return e.$emit("desynced")}}},[t("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("messages.field_synced_with_origin"),expression:"__('messages.field_synced_with_origin')",modifiers:{top:!0}}],staticClass:"h-4 w-4 mr-1.5 mb-1 text-gray-600",attrs:{name:"light/hyperlink"}})],1):e._e(),!e.isReadOnly&&!e.isTab?t("button",{directives:[{name:"show",rawName:"v-show",value:e.syncable&&!e.isSynced,expression:"syncable && !isSynced"}],staticClass:"outline-none",class:{flex:e.syncable&&!e.isSynced},on:{click:function(a){return e.$emit("synced")}}},[t("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("messages.field_desynced_from_origin"),expression:"__('messages.field_desynced_from_origin')",modifiers:{top:!0}}],staticClass:"h-4 w-4 mr-1.5 mb-1 text-gray-600",attrs:{name:"light/hyperlink-broken"}})],1):e._e()],1):e._e(),e.instructions&&e.config.instructions_position!=="below"?t("div",{staticClass:"help-block",class:{"-mt-2":e.showLabel},domProps:{innerHTML:e._s(e.instructions)}}):e._e()]),l?t("loading-graphic",{attrs:{size:16,inline:!0}}):e._e(),l?e._e():e._t("fieldtype",function(){return[e.fieldtypeComponentExists?t(e.fieldtypeComponent,{tag:"component",attrs:{config:e.config,value:r,meta:s,handle:e.config.handle,"name-prefix":e.namePrefix,"field-path-prefix":e.fieldPathPrefix,"read-only":e.isReadOnly},on:{input:function(a){return e.$emit("input",a)},"meta-updated":function(a){return e.$emit("meta-updated",a)},focus:e.focused,blur:e.blurred}}):t("div",{staticClass:"text-xs text-red-500"},[e._v("Component "),t("code",{domProps:{textContent:e._s(e.fieldtypeComponent)}}),e._v(" does not exist.")])]}),e.instructions&&e.config.instructions_position==="below"?t("div",{staticClass:"help-block mt-2",domProps:{innerHTML:e._s(e.instructions)}}):e._e(),e.hasError?t("div",e._l(e.errors,function(a,o){return t("small",{key:o,staticClass:"help-block text-red-500 mt-2 mb-0",domProps:{textContent:e._s(a)}})}),0):e._e()],2)}}],null,!0)})},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(_sfc_main$6,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,null,null,null);const PublishField=__component__$6.exports;function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uniqid={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var pid=typeof process<"u"&&process.pid?process.pid.toString(36):"",address="";if(typeof __webpack_require__!="function"&&typeof commonjsRequire<"u"){var mac="",os=require$$0;if(os.networkInterfaces)var networkInterfaces=os.networkInterfaces();if(networkInterfaces){e:for(let n in networkInterfaces){const e=networkInterfaces[n],t=e.length;for(var i=0;i<t;i++)if(e[i]!==void 0&&e[i].mac&&e[i].mac!="00:00:00:00:00:00"){mac=e[i].mac;break e}}address=mac?parseInt(mac.replace(/\:|\D+/gi,"")).toString(36):""}}uniqid.exports=uniqid.exports.default=function(n,e){return(n||"")+address+pid+now().toString(36)+(e||"")};uniqid.exports.process=function(n,e){return(n||"")+pid+now().toString(36)+(e||"")};uniqid.exports.time=function(n,e){return(n||"")+now().toString(36)+(e||"")};function now(){var n=Date.now(),e=now.last||n;return now.last=n>e?n:e+1}const KEYS=["if","if_any","show_when","show_when_any","unless","unless_any","hide_when","hide_when_any"],OPERATORS=["equals","not","contains","contains_any","===","!==",">",">=","<","<=","custom"],ALIASES={is:"equals","==":"equals",isnt:"not","!=":"not",includes:"contains",includes_any:"contains_any"};var VERSION="1.13.6",root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,_isNaN=isNaN,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function _$1(n){if(n instanceof _$1)return n;if(!(this instanceof _$1))return new _$1(n);this._wrapped=n}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function identity(n){return n}function tagTester(n){var e="[object "+n+"]";return function(t){return toString.call(t)===e}}var isFunction=tagTester("Function"),nodelist=root.document&&root.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"&&(isFunction=function(n){return typeof n=="function"||!1});const isFunction$1=isFunction;function isObject(n){var e=typeof n;return e==="function"||e==="object"&&!!n}const isArray=nativeIsArray||tagTester("Array");function createAssigner(n,e){return function(t){var s=arguments.length;if(e&&(t=Object(t)),s<2||t==null)return t;for(var r=1;r<s;r++)for(var l=arguments[r],a=n(l),o=a.length,c=0;c<o;c++){var u=a[c];(!e||t[u]===void 0)&&(t[u]=l[u])}return t}}function has(n,e){return n!=null&&hasOwnProperty.call(n,e)}function emulatedSet(n){for(var e={},t=n.length,s=0;s<t;++s)e[n[s]]=!0;return{contains:function(r){return e[r]===!0},push:function(r){return e[r]=!0,n.push(r)}}}function collectNonEnumProps(n,e){e=emulatedSet(e);var t=nonEnumerableProps.length,s=n.constructor,r=isFunction$1(s)&&s.prototype||ObjProto,l="constructor";for(has(n,l)&&!e.contains(l)&&e.push(l);t--;)l=nonEnumerableProps[t],l in n&&n[l]!==r[l]&&!e.contains(l)&&e.push(l)}function keys(n){if(!isObject(n))return[];if(nativeKeys)return nativeKeys(n);var e=[];for(var t in n)has(n,t)&&e.push(t);return hasEnumBug&&collectNonEnumProps(n,e),e}const extendOwn=createAssigner(keys);function isMatch(n,e){var t=keys(e),s=t.length;if(n==null)return!s;for(var r=Object(n),l=0;l<s;l++){var a=t[l];if(e[a]!==r[a]||!(a in r))return!1}return!0}function matcher(n){return n=extendOwn({},n),function(e){return isMatch(e,n)}}function deepGet(n,e){for(var t=e.length,s=0;s<t;s++){if(n==null)return;n=n[e[s]]}return t?n:void 0}function toPath$1(n){return isArray(n)?n:[n]}_$1.toPath=toPath$1;function toPath(n){return _$1.toPath(n)}function property(n){return n=toPath(n),function(e){return deepGet(e,n)}}function optimizeCb(n,e,t){if(e===void 0)return n;switch(t??3){case 1:return function(s){return n.call(e,s)};case 3:return function(s,r,l){return n.call(e,s,r,l)};case 4:return function(s,r,l,a){return n.call(e,s,r,l,a)}}return function(){return n.apply(e,arguments)}}function baseIteratee(n,e,t){return n==null?identity:isFunction$1(n)?optimizeCb(n,e,t):isObject(n)&&!isArray(n)?matcher(n):property(n)}function iteratee(n,e){return baseIteratee(n,e,1/0)}_$1.iteratee=iteratee;function cb(n,e,t){return _$1.iteratee!==iteratee?_$1.iteratee(n,e):baseIteratee(n,e,t)}function createSizePropertyCheck(n){return function(e){var t=n(e);return typeof t=="number"&&t>=0&&t<=MAX_ARRAY_INDEX}}function shallowProperty(n){return function(e){return e==null?void 0:e[n]}}const getLength=shallowProperty("length"),isArrayLike=createSizePropertyCheck(getLength);function map(n,e,t){e=cb(e,t);for(var s=!isArrayLike(n)&&keys(n),r=(s||n).length,l=Array(r),a=0;a<r;a++){var o=s?s[a]:a;l[a]=e(n[o],o,n)}return l}function each(n,e,t){e=optimizeCb(e,t);var s,r;if(isArrayLike(n))for(s=0,r=n.length;s<r;s++)e(n[s],s,n);else{var l=keys(n);for(s=0,r=l.length;s<r;s++)e(n[l[s]],l[s],n)}return n}function filter(n,e,t){var s=[];return e=cb(e,t),each(n,function(r,l,a){e(r,l,a)&&s.push(r)}),s}function chain(n){var e=_$1(n);return e._chain=!0,e}function functions(n){var e=[];for(var t in n)isFunction$1(n[t])&&e.push(t);return e.sort()}function chainResult(n,e){return n._chain?_$1(e).chain():e}function mixin(n){return each(functions(n),function(e){var t=_$1[e]=n[e];_$1.prototype[e]=function(){var s=[this._wrapped];return push.apply(s,arguments),chainResult(this,t.apply(_$1,s))}}),_$1}mixin({chain,filter,each});class Converter{fromBlueprint(e,t=null){return map(e,(s,r)=>this.splitRhs(r,s,t))}toBlueprint(e){let t={};return each(e,s=>{t[s.field]=this.combineRhs(s)}),t}splitRhs(e,t,s=null){return{field:this.getScopedFieldHandle(e,s),operator:this.getOperatorFromRhs(t),value:this.getValueFromRhs(t)}}getScopedFieldHandle(e,t){return e.startsWith("root.")||!t?e:t+e}getOperatorFromRhs(e){let t="==";return chain(this.getOperatorsAndAliases()).filter(s=>new RegExp(`^${s} [^=]`).test(this.normalizeConditionString(e))).each(s=>t=s),this.normalizeOperator(t)}normalizeOperator(e){return ALIASES[e]?ALIASES[e]:e}getValueFromRhs(e){let t=this.normalizeConditionString(e);return chain(this.getOperatorsAndAliases()).filter(s=>new RegExp(`^${s} [^=]`).test(t)).each(s=>t=t.replace(new RegExp(`^${s}[ ]*`),"")),t}combineRhs(e){let t=e.operator?e.operator.trim():"",s=e.value.trim();return`${t} ${s}`.trim()}getOperatorsAndAliases(){return OPERATORS.concat(Object.keys(ALIASES))}normalizeConditionString(e){return e===null?"null":e===""?"empty":e.toString()}}function data_get$1(n,e,t=null){var s=Array.isArray(e)?e:e.split("."),r=s.reduce((l,a)=>l&&l[a],n);return r!==void 0?r:t}const isString=tagTester("String");var isArguments=tagTester("Arguments");(function(){isArguments(arguments)||(isArguments=function(n){return has(n,"callee")})})();const isArguments$1=isArguments;function isEmpty(n){if(n==null)return!0;var e=getLength(n);return typeof e=="number"&&(isArray(n)||isString(n)||isArguments$1(n))?e===0:getLength(keys(n))===0}function values(n){for(var e=keys(n),t=e.length,s=Array(t),r=0;r<t;r++)s[r]=n[e[r]];return s}function sortedIndex(n,e,t,s){t=cb(t,s,1);for(var r=t(e),l=0,a=getLength(n);l<a;){var o=Math.floor((l+a)/2);t(n[o])<r?l=o+1:a=o}return l}function createPredicateIndexFinder(n){return function(e,t,s){t=cb(t,s);for(var r=getLength(e),l=n>0?0:r-1;l>=0&&l<r;l+=n)if(t(e[l],l,e))return l;return-1}}const findIndex=createPredicateIndexFinder(1),isNumber=tagTester("Number");function isNaN$1(n){return isNumber(n)&&_isNaN(n)}function createIndexFinder(n,e,t){return function(s,r,l){var a=0,o=getLength(s);if(typeof l=="number")n>0?a=l>=0?l:Math.max(l+o,a):o=l>=0?Math.min(l+1,o):l+o+1;else if(t&&l&&o)return l=t(s,r),s[l]===r?l:-1;if(r!==r)return l=e(slice.call(s,a,o),isNaN$1),l>=0?l+a:-1;for(l=n>0?a:o-1;l>=0&&l<o;l+=n)if(s[l]===r)return l;return-1}}const indexOf=createIndexFinder(1,findIndex,sortedIndex);function contains(n,e,t,s){return isArrayLike(n)||(n=values(n)),(typeof t!="number"||s)&&(t=0),indexOf(n,e,t)>=0}function intersection(n){for(var e=[],t=arguments.length,s=0,r=getLength(n);s<r;s++){var l=n[s];if(!contains(e,l)){var a;for(a=1;a<t&&contains(arguments[a],l);a++);a===t&&e.push(l)}}return e}function negate(n){return function(){return!n.apply(this,arguments)}}function reject(n,e,t){return filter(n,negate(cb(e)),t)}function initial(n,e,t){return slice.call(n,0,Math.max(0,n.length-(e==null||t?1:e)))}function first(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[0]:initial(n,n.length-e)}mixin({chain,map,each,filter,reject,first,isEmpty});const NUMBER_SPECIFIC_COMPARISONS=[">",">=","<","<="];class Validator{constructor(n,e,t,s){this.field=n,this.values=e,this.rootValues=t?t.state.publish[s].values:!1,this.store=t,this.storeName=s,this.passOnAny=!1,this.showOnPass=!0,this.converter=new Converter}passesConditions(n){let e=n||this.getConditions();if(e===void 0)return!0;if(this.isCustomConditionWithoutTarget(e))return this.passesCustomCondition(this.prepareCondition(e));let t=this.passOnAny?this.passesAnyConditions(e):this.passesAllConditions(e);return this.showOnPass?t:!t}getConditions(){let n=chain(KEYS).filter(t=>this.field[t]).first().value();if(!n)return;n.includes("any")&&(this.passOnAny=!0),(n.includes("unless")||n.includes("hide_when"))&&(this.showOnPass=!1);let e=this.field[n];return this.isCustomConditionWithoutTarget(e)?e:this.converter.fromBlueprint(e,this.field.prefix)}isCustomConditionWithoutTarget(n){return isString(n)}passesAllConditions(n){return chain(n).map(e=>this.prepareCondition(e)).reject(e=>this.passesCondition(e)).isEmpty().value()}passesAnyConditions(n){return!chain(n).map(e=>this.prepareCondition(e)).filter(e=>this.passesCondition(e)).isEmpty().value()}prepareCondition(n){if(isString(n)||n.operator==="custom")return this.prepareCustomCondition(n);let e=this.prepareOperator(n.operator),t=this.prepareLhs(n.field,e),s=this.prepareRhs(n.value,e);return{lhs:t,operator:e,rhs:s}}prepareOperator(n){switch(n){case null:case"":case"is":case"equals":return"==";case"isnt":case"not":case"¯\\_(ツ)_/¯":return"!=";case"includes":case"contains":return"includes";case"includes_any":case"contains_any":return"includes_any"}return n}prepareLhs(n,e){let t=this.getFieldValue(n);return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(t):e==="includes"&&!isObject(t)?t?t.toString():"":(isString(t)&&isEmpty(t)&&(t=null),isString(t)?JSON.stringify(t.trim()):t)}prepareRhs(n,e){switch(n){case"null":return null;case"true":return!0;case"false":return!1}return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(n):n==="empty"||e==="includes"||e==="includes_any"?n:isString(n)?JSON.stringify(n.trim()):n}prepareCustomCondition(n){let e=this.prepareFunctionName(n.value||n),t=this.prepareParams(n.value||n),s=n.field?this.getFieldValue(n.field):null,r=n.field;return{functionName:e,params:t,target:s,targetHandle:r}}prepareFunctionName(n){return n.replace(new RegExp("^custom "),"").split(":")[0]}prepareParams(n){let e=n.split(":")[1];return e?e.split(",").map(t=>t.trim()):[]}getFieldValue(n){return n.startsWith("root.")?data_get$1(this.rootValues,n.replace(new RegExp("^root."),"")):data_get$1(this.values,n)}passesCondition(condition){return condition.functionName?this.passesCustomCondition(condition):condition.operator==="includes"?this.passesIncludesCondition(condition):condition.operator==="includes_any"?this.passesIncludesAnyCondition(condition):(condition.rhs==="empty"&&(condition.lhs=isEmpty(condition.lhs),condition.rhs=!0),isObject(condition.lhs)?!1:eval(`${condition.lhs} ${condition.operator} ${condition.rhs}`))}passesIncludesCondition(n){return n.lhs.includes(n.rhs)}passesIncludesAnyCondition(n){let e=n.rhs.split(",").map(t=>t.trim());return Array.isArray(n.lhs)?intersection(n.lhs,e).length:new RegExp(e.join("|")).test(n.lhs)}passesCustomCondition(n){let e=data_get$1(this.store.state.statamic.conditions,n.functionName);if(typeof e!="function")return console.error(`Statamic field condition [${n.functionName}] was not properly defined.`),!1;let t=e({params:n.params,target:n.target,targetHandle:n.targetHandle,values:this.values,root:this.rootValues,store:this.store,storeName:this.storeName});return this.showOnPass?t:!t}passesNonRevealerConditions(n){let e=this.getConditions();if(this.isCustomConditionWithoutTarget(e))return this.passesConditions(e);let t=data_get$1(this.store.state.publish[this.storeName],"revealerFields",[]),s=chain(this.getConditions()).reject(r=>t.includes(this.relativeLhsToAbsoluteFieldPath(r.field,n))).value();return this.passesConditions(s)}relativeLhsToAbsoluteFieldPath(n,e){return e?n.startsWith("root.")?n.replace(/^root\./,""):e+"."+n:n}}const ValidatesFieldConditions={inject:{storeName:{default:"base"}},methods:{showField(n,e){let t=e||n.handle,s=e?e.replace(new RegExp("."+n.handle+"$"),""):"";if(n.visibility==="hidden"||this.shouldForceHiddenField(t))return this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:t,hidden:"force",omitValue:!1}),!1;let r=new Validator(n,this.values,this.$store,this.storeName),l=r.passesConditions();return n.always_save===!0?(this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:t,hidden:!l,omitValue:!1}),l):(this.$nextTick(()=>{this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:t,hidden:!l,omitValue:n.type==="revealer"||!r.passesNonRevealerConditions(s)})}),l)},shouldForceHiddenField(n){return data_get$1(this.$store.state.publish[this.storeName].hiddenFields[n],"hidden")==="force"}}},_sfc_main$5={components:{PublishField},mixins:[ValidatesFieldConditions],inject:["storeName"],props:{fields:{type:Array,required:!0},readOnly:Boolean,syncable:Boolean,syncableFields:Array,namePrefix:String},computed:{state(){return this.$store.state.publish[this.storeName]},values(){return this.state.values},meta(){return this.state.meta},errors(){return this.state.errors}},methods:{isSyncableField(n){return this.syncable?this.syncableFields?this.syncableFields.includes(n.handle):!0:!1}}};var _sfc_render$5=function n(){var e=this,t=e._self._c;return t("div",{staticClass:"publish-fields @container"},e._l(e.fields,function(s){return t("publish-field",{directives:[{name:"show",rawName:"v-show",value:e.showField(s),expression:"showField(field)"}],key:s.handle,attrs:{config:s,value:e.values[s.handle],meta:e.meta[s.handle],errors:e.errors[s.handle],"read-only":e.readOnly,syncable:e.isSyncableField(s),"name-prefix":e.namePrefix},on:{input:function(r){return e.$emit("updated",s.handle,r)},"meta-updated":function(r){return e.$emit("meta-updated",s.handle,r)},synced:function(r){return e.$emit("synced",s.handle)},desynced:function(r){return e.$emit("desynced",s.handle)},focus:function(r){return e.$emit("focus",s.handle)},blur:function(r){return e.$emit("blur",s.handle)}}})}),1)},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(_sfc_main$5,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,null,null,null);const PublishFields=__component__$5.exports,_sfc_main$4={components:{PublishFields},props:{filter:Object,values:Object},computed:{defaultValues(){return this.filter.values||{}},containerValues(){return clone(this.values||this.defaultValues)}},methods:{updateValues(n){let e=clone(n);Object.keys(n).forEach(t=>{_.isEmpty(n[t])&&delete e[t]}),this.$emit("changed",e)},resetAll(){this.$emit("changed",null),this.$emit("cleared")},close(){this.$emit("closed")}}};var _sfc_render$4=function n(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full no-label"},[e.filter.fields.length?t("publish-container",{staticClass:"p-3",attrs:{name:`filter-${e.filter.handle}`,meta:{},values:e.containerValues,"track-dirty-state":!1},on:{updated:e.updateValues},scopedSlots:e._u([{key:"default",fn:function({setFieldValue:s}){return t("publish-fields",{attrs:{fields:e.filter.fields,"name-prefix":`filter-${e.filter.handle}`},on:{updated:s}})}}],null,!1,1948012401)}):e._e(),t("div",{staticClass:"flex border-t"},[t("button",{staticClass:"p-2 hover:bg-gray-100 rounded-bl text-xs flex-1",domProps:{textContent:e._s(e.__("Clear"))},on:{click:e.resetAll}}),t("button",{staticClass:"p-2 hover:bg-gray-100 flex-1 rounded-br border-l text-xs",domProps:{textContent:e._s(e.__("Close"))},on:{click:function(s){return e.$emit("closed")}}})])],1)},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(_sfc_main$4,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,null,null,null);const DataListFilter=__component__$4.exports,_sfc_main$3={components:{PublishField},props:{config:Object,values:Object,badges:Object},data(){return{initialValues:this.values,containerValues:{},filter:null,field:null,fieldValues:null}},computed:{availableFieldFilters(){return this.config?this.config.extra.filter(n=>!this.initialValues[n.handle]):[]},hasAvailableFieldFilters(){return!!this.availableFieldFilters.length},fieldOptions(){let n=this.availableFieldFilters.map(e=>({value:e.handle,label:e.display}));return _.sortBy(n,e=>e.label)},showFieldFilter(){return this.field},isFilterComplete(){if(!this.filter)return!1;let n=_.chain(this.filter.fields).filter(function(t){return new Validator(t,this.fieldValues).passesConditions()},this).mapObject(t=>t.handle).values().value(),e=_.chain(this.fieldValues).filter((t,s)=>n.includes(s)&&t).values().value().length===n.length;return this.field!==null&&e},newValues(){let n=clone(this.values);return delete n[this.field],n[this.field]=this.isFilterComplete?this.fieldValues:null,n}},watch:{field:"update",fieldValues:{deep:!0,handler(){this.update()}}},mounted(){this.hasAvailableFieldFilters&&(this.reset(),this.$refs.fieldSelect.$refs.search.focus())},methods:{popoverClosed(){this.badges[this.field]||this.resetAll()},reset(){this.field&&this.$emit("changed",this.initialValues),this.containerValues={},this.filter=null,this.field=null,this.fieldValues=null},resetAll(){this.reset(),this.$emit("cleared")},resetInitialValues(){this.initialValues=this.values,this.reset()},createFilter(n){this.field&&this.$emit("changed",this.initialValues),this.reset(),this.setFilter(n),this.setDefaultValues(),this.field=n},setFilter(n){this.filter=_.find(this.availableFieldFilters,e=>e.handle===n)},setDefaultValues(){if(!this.filter)return;let n={};this.filter.fields.filter(e=>e.default).forEach(e=>n[e.handle]=e.default),this.updateValues(n)},updateValues(n){this.updateContainerValues(n),this.updateFieldValues(n)},updateContainerValues(n){this.containerValues=clone(n)},updateFieldValues:_.debounce(function(n){this.fieldValues=clone(n)},300),update(){this.$emit("changed",this.newValues)}}};var _sfc_render$3=function n(){var e=this,t=e._self._c;return t("div",[e.hasAvailableFieldFilters?t("div",[t("div",{staticClass:"flex flex-col p-3"},[t("v-select",{ref:"fieldSelect",attrs:{placeholder:e.__("Field"),options:e.fieldOptions,reduce:s=>s.value,value:e.field},on:{input:e.createFilter}}),e.showFieldFilter?t("publish-container",{staticClass:"filter-fields mt-2",attrs:{name:"filter-field",meta:{},values:e.containerValues,"track-dirty-state":!1},on:{updated:e.updateValues},scopedSlots:e._u([{key:"default",fn:function({setFieldValue:s,setFieldMeta:r}){return t("publish-fields",{staticClass:"w-full no-label",attrs:{fields:e.filter.fields,"name-prefix":"filter-field"},on:{updated:s,"meta-updated":r}})}}],null,!1,2555427817)}):e._e()],1),t("div",{staticClass:"flex border-t text-gray-800"},[t("button",{staticClass:"p-2 hover:bg-gray-100 rounded-bl text-xs flex-1",domProps:{textContent:e._s(e.__("Clear"))},on:{click:e.resetAll}}),t("button",{staticClass:"p-2 hover:bg-gray-100 flex-1 rounded-br border-l text-xs",domProps:{textContent:e._s(e.__("Close"))},on:{click:function(s){return e.$emit("closed")}}})])]):t("v-select",{attrs:{disabled:!0,placeholder:e.__("No available filters")}})],1)},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const FieldFilter=__component__$3.exports,_sfc_main$2={components:{DataListFilter,FieldFilter},props:{filters:{type:Array,default:()=>[]},activePreset:String,activePresetPayload:Object,activeFilters:Object,activeFilterBadges:Object,activeCount:Number,searchQuery:String,savesPresets:Boolean,preferencesPrefix:String,isSearching:Boolean},data(){return{filtering:!1,creating:!1,saving:!1,deleting:!1,savingPresetName:null,presets:[]}},inject:["sharedState"],watch:{activePresetPayload:{deep:!0,handler(n){this.savingPresetName=n.display||null}}},computed:{fieldFilter(){return this.filters.find(n=>n.handle==="runway-fields")},standardFilters(){return this.filters.filter(n=>n.handle!=="runway-fields")},pinnedFilters(){return this.standardFilters.filter(n=>n.pinned)},unpinnedFilters(){return this.standardFilters.filter(n=>!n.pinned)},creatingFilter(){return _.find(this.unpinnedFilters,n=>n.handle===this.creating)},creatingFilterHeader(){let n=data_get(this.creatingFilter,"title","Filter where");return __(n)+":"},showUnpinnedFilterSelection(){return!this.creating},fieldFilterBadges(){return data_get(this.activeFilterBadges,"runway-fields",{})},standardBadges(){return _.omit(this.activeFilterBadges,"runway-fields")},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},canSave(){return this.savesPresets&&this.isDirty&&this.preferencesPrefix},savingPresetHandle(){return this.$slugify(this.savingPresetName,"_")},isUpdatingPreset(){return this.savingPresetHandle===this.activePreset},preferencesKey(){let n=this.savingPresetHandle||this.activePreset;return!this.preferencesPrefix||!n?null:`${this.preferencesPrefix}.filters.${n}`},preferencesPayload(){if(!this.savingPresetName)return null;let n={display:this.savingPresetName};return this.searchQuery&&(n.query=this.searchQuery),this.activeCount&&(n.filters=clone(this.activeFilters)),n}},methods:{resetFilterPopover(){this.creating=!1,setTimeout(()=>{var n;return(n=this.$refs.fieldFilter)==null?void 0:n.resetInitialValues()},100)},fieldFilterClosed(){this.$refs.fieldFilter.popoverClosed()},removeFieldFilter(n){let e=clone(this.activeFilters.fields);delete e[n],this.$emit("changed",{handle:"runway-fields",values:e})},removeStandardFilter(n){this.$emit("changed",{handle:n,values:null})},save(){!this.canSave||!this.preferencesPayload||(this.saving=!0,this.$preferences.set(this.preferencesKey,this.preferencesPayload).then(n=>{this.$refs.savePopover.close(),this.$emit("saved",this.savingPresetHandle),this.$toast.success(this.isUpdatingPreset?__("Filter preset updated"):__("Filter preset saved")),this.savingPresetName=null,this.saving=!1}).catch(n=>{this.$toast.error(this.isUpdatingPreset?__("Unable to update filter preset"):__("Unable to save filter preset")),this.saving=!1}))},remove(){this.$preferences.remove(this.preferencesKey).then(n=>{this.$emit("deleted",this.activePreset),this.$toast.success(__("Filter preset deleted")),this.deleting=!1}).catch(n=>{this.$toast.error(__("Unable to delete filter preset")),this.deleting=!1})}}};var _sfc_render$2=function n(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-inner bg-gray-300"},[t("div",{staticClass:"flex items-center flex-wrap px-3 border-b pt-2"},[e.fieldFilter?t("popover",{attrs:{placement:"bottom-start"},on:{closed:e.fieldFilterClosed},scopedSlots:e._u([{key:"default",fn:function({close:s}){return[t("div",{staticClass:"flex flex-col text-left min-w-[18rem]"},[t("div",{staticClass:"filter-fields text-sm"},[t("field-filter",{ref:"fieldFilter",attrs:{config:e.fieldFilter,values:e.activeFilters.fields||{},badges:e.fieldFilterBadges},on:{changed:function(r){return e.$emit("changed",{handle:"runway-fields",values:r})},cleared:function(r){e.creating=!1},closed:s}})],1)])]}}],null,!1,1951453130)},[t("template",{slot:"trigger"},[t("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2",on:{click:e.resetFilterPopover}},[e._v(" "+e._s(e.fieldFilter.title)+" "),t("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e(),e._l(e.pinnedFilters,function(s){return e.pinnedFilters.length?t("popover",{key:s.handle,attrs:{placement:"bottom-start","stop-propagation":!1},scopedSlots:e._u([{key:"default",fn:function({close:r}){return[t("div",{staticClass:"filter-fields w-64"},[t("data-list-filter",{key:s.handle,attrs:{filter:s,values:e.activeFilters[s.handle]},on:{changed:function(l){return e.$emit("changed",{handle:s.handle,values:l})},closed:r}})],1)]}}],null,!0)},[t("template",{slot:"trigger"},[t("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2"},[e._v(" "+e._s(s.title)+" "),t("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e()}),e.unpinnedFilters.length?t("popover",{attrs:{placement:"bottom-start","stop-propagation":!1},scopedSlots:e._u([{key:"default",fn:function({close:s}){return[t("div",{staticClass:"filter-fields w-64"},[t("h6",{staticClass:"p-3 pb-0",domProps:{textContent:e._s(e.creatingFilterHeader)}}),e.showUnpinnedFilterSelection?t("div",{staticClass:"p-3 pt-1"},e._l(e.unpinnedFilters,function(r){return t("button",{key:r.handle,staticClass:"btn w-full mt-1",domProps:{textContent:e._s(r.title)},on:{click:function(l){e.creating=r.handle}}})}),0):t("div",e._l(e.unpinnedFilters,function(r){return e.creating===r.handle?t("data-list-filter",{key:r.handle,attrs:{filter:r,values:e.activeFilters[r.handle]},on:{changed:function(l){return e.$emit("changed",{handle:r.handle,values:l})},cleared:function(l){e.creating=!1},closed:s}}):e._e()}),1)])]}}],null,!1,1858792327)},[t("template",{slot:"trigger"},[t("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2",on:{click:e.resetFilterPopover}},[e._v(" "+e._s(e.__("Filter"))+" "),t("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e(),e._l(e.fieldFilterBadges,function(s,r){return t("div",{staticClass:"filter-badge mr-2 mb-2"},[t("span",[e._v(e._s(s))]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Remove Filter"),expression:"__('Remove Filter')"}],on:{click:function(l){return e.removeFieldFilter(r)}}},[e._v("×")])])}),e._l(e.standardBadges,function(s,r){return t("div",{staticClass:"filter-badge mr-2 mb-2"},[t("span",[e._v(e._s(s))]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Remove Filter"),expression:"__('Remove Filter')"}],on:{click:function(l){return e.removeStandardFilter(r)}}},[e._v("×")])])})],2)])},_sfc_staticRenderFns$2=[],__component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,null,null,null);const DataListFilters=__component__$2.exports,_sfc_main$1={mixins:[Listing],components:{DataListFilters},props:{listingConfig:Object,initialColumns:Array,actionUrl:String,initialPrimaryColumn:String,allowBulkActions:{type:Boolean,default:!0},allowColumnPicker:{type:Boolean,default:!0}},data(){return{listingKey:"id",preferencesPrefix:this.listingConfig.preferencesPrefix??"runway",requestUrl:this.listingConfig.requestUrl,columns:this.initialColumns,meta:{},primaryColumn:`cell-${this.initialPrimaryColumn}`,deletingRow:!1}},methods:{canViewRow(n){return n.viewable&&n.permalink},canEditRow(n){return n.editable},confirmDeleteRow(n,e,t){this.visibleColumns=this.columns.filter(s=>s.visible),this.deletingRow={id:n,index:e,deleteUrl:t}},deleteRow(n){const e=this.deletingRow.id;n=n||__("Deleted"),this.$axios.delete(this.deletingRow.deleteUrl).then(()=>{let t=_.indexOf(this.items,_.findWhere(this.rows,{id:e}));this.items.splice(t,1),this.deletingRow=!1,this.$toast.success(n)}).catch(t=>{this.$toast.error(t.response?t.response.data.message:__("Something went wrong"))})},cancelDeleteRow(){this.deletingRow=!1,setTimeout(()=>{this.visibleColumns=this.columns.filter(n=>n.visible)},50)}}};var _sfc_render$1=function n(){var e=this,t=e._self._c;return t("div",[e.initializing?t("div",{staticClass:"card loading"},[t("loading-graphic")],1):e._e(),e.initializing?e._e():t("data-list",{attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection},on:{"visible-columns-updated":function(s){e.visibleColumns=s}},scopedSlots:e._u([{key:"default",fn:function({hasSelections:s}){return t("div",{},[t("div",{staticClass:"card overflow-hidden p-0 relative"},[t("div",{staticClass:"flex flex-wrap items-center justify-between px-2 pb-2 text-sm border-b"},[t("data-list-filter-presets",{directives:[{name:"show",rawName:"v-show",value:e.alwaysShowFilters||!e.showFilters,expression:"alwaysShowFilters || !showFilters"}],ref:"presets",attrs:{"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"has-active-filters":e.hasActiveFilters,"preferences-prefix":e.preferencesPrefix,"search-query":e.searchQuery},on:{selected:e.selectPreset,reset:e.filtersReset,"hide-filters":e.filtersHide,"show-filters":e.filtersShow}}),t("data-list-search",{ref:"search",staticClass:"h-8 mt-2 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(r){e.searchQuery=r},expression:"searchQuery"}}),t("div",{staticClass:"flex space-x-2 mt-2"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Reset"))},on:{click:function(r){return e.$refs.presets.refreshPreset()}}}),t("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Save"))},on:{click:function(r){return e.$refs.presets.savePreset()}}}),t("data-list-column-picker",{attrs:{"preferences-key":e.preferencesKey("columns")}})],1)],1),t("div",[t("data-list-filters",{attrs:{filters:e.filters,"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery,"is-searching":!0,"saves-presets":!0,"preferences-prefix":e.preferencesPrefix},on:{changed:e.filterChanged,saved:function(r){return e.$refs.presets.setPreset(r)},deleted:function(r){return e.$refs.presets.refreshPresets()}}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.items.length===0,expression:"items.length === 0"}],staticClass:"p-6 text-center text-gray-500",domProps:{textContent:e._s(e.__("No results"))}}),t("data-list-bulk-actions",{attrs:{url:e.actionUrl},on:{started:e.actionStarted,completed:e.actionCompleted}}),t("div",{staticClass:"overflow-x-auto overflow-y-hidden"},[t("data-list-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],attrs:{"allow-bulk-actions":e.allowBulkActions,loading:e.loading,reorderable:!1,sortable:!0,"toggle-selection-on-row-click":e.allowBulkActions,"allow-column-picker":e.allowColumnPicker,"column-preferences-key":e.preferencesKey("columns")},on:{sorted:e.sorted},scopedSlots:e._u([{key:e.primaryColumn,fn:function({row:r,value:l}){return[t("a",{attrs:{href:r.edit_url??r.permalink},on:{click:function(a){a.stopPropagation()}}},[e._v(e._s(l))])]}},{key:"actions",fn:function({row:r,index:l}){return[e.canViewRow(r)||e.canEditRow(r)||r.actions.length?t("dropdown-list",[e.canViewRow(r)?t("dropdown-item",{attrs:{text:e.__("View"),redirect:r.permalink}}):e._e(),e.canEditRow(r)?t("dropdown-item",{attrs:{text:e.__("Edit"),redirect:r.edit_url}}):e._e(),(e.canViewRow(r)||e.canEditRow(r))&&r.actions.length?t("div",{staticClass:"divider"}):e._e(),t("data-list-inline-actions",{attrs:{item:r.id,url:e.actionUrl,actions:r.actions},on:{started:e.actionStarted,completed:e.actionCompleted}})],1):t("div",{staticClass:"w-10 block"})]}}],null,!0)})],1),e.deletingRow!==!1?t("confirmation-modal",{attrs:{title:e.__("Delete"),bodyText:e.__("Are you sure you want to delete this item?"),buttonText:e.__("Delete"),danger:!0},on:{confirm:function(r){return e.deleteRow()},cancel:e.cancelDeleteRow}}):e._e()],1),t("data-list-pagination",{staticClass:"mt-3",attrs:{"resource-meta":e.meta,"per-page":e.perPage},on:{"page-selected":e.selectPage,"per-page-changed":e.changePerPage}})],1)}}],null,!1,1707528122)})],1)},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,null,null,null);const EventsListing=__component__$1.exports,_sfc_main={mixins:[Fieldtype],computed:{},methods:{triggerEvent(){this.$axios.post(this.meta.post_url,this.meta).then(()=>{this.$toast.success(__("Event triggered"))})}}};var _sfc_render=function n(){var e=this,t=e._self._c;return t("div",[t("button",{staticClass:"btn",attrs:{type:"button"},domProps:{textContent:e._s(e.__("Trigger Event"))},on:{click:e.triggerEvent}})])},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,null,null,null);const TriggerEventButton=__component__.exports;Statamic.$components.register("statamic-events-publish-form",PublishForm);Statamic.$components.register("statamic-events-listing",EventsListing);Statamic.$components.register("statamic-events-trigger-button-fieldtype",TriggerEventButton);
